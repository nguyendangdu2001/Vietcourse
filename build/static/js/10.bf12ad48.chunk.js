(this.webpackJsonpbwd=this.webpackJsonpbwd||[]).push([[10],{557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalButton=void 0;var r=o(n(0)),a=o(n(17)),c=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,d(t).call(this,e))).state={isSdkReady:!1},n}var n,c,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,a=n.options,c=n.amount,o=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(a&&a.currency?a.currency:"USD"),value:c.toString()}}],application_context:{shipping_preference:o}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,c=t.onSuccess,o=t.createOrder,u=t.createSubscription,l=t.onApprove,s=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var d=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:a.default}),f=n&&!o?function(t,n){return e.createOrder(t,n)}:function(e,t){return o(e,t)};return r.default.createElement(d,i({},this.props,{createOrder:u?void 0:f,createSubscription:u,onApprove:c?function(t,n){return e.onApprove(t,n)}:function(e,t){return l(e,t)},style:s}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,a=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();a.push("".concat(t,"=").concat(n[e]))}));var c=document.createElement("script");c.type="text/javascript",c.src="https://www.paypal.com/sdk/js?".concat(a.join("&")),c.async=!0,c.onload=function(){e.setState({isSdkReady:!0}),r&&r()},c.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(c)}}])&&l(n.prototype,c),o&&l(n,o),t}(r.default.Component);t.PayPalButton=m,p(m,"propTypes",{amount:c.default.oneOfType([c.default.number,c.default.string]),currency:c.default.oneOfType([c.default.number,c.default.string]),shippingPreference:c.default.string,onSuccess:c.default.func,catchError:c.default.func,onError:c.default.func,createOrder:c.default.func,createSubscription:c.default.func,onApprove:c.default.func,style:c.default.object,options:c.default.shape({clientId:c.default.string,merchantId:c.default.string,currency:c.default.oneOfType([c.default.number,c.default.string]),intent:c.default.string,commit:c.default.oneOfType([c.default.bool,c.default.string]),vault:c.default.oneOfType([c.default.bool,c.default.string]),component:c.default.string,disableFunding:c.default.string,disableCard:c.default.string,integrationDate:c.default.string,locale:c.default.string,buyerCountry:c.default.string,debug:c.default.oneOfType([c.default.bool,c.default.string])}),onButtonReady:c.default.func}),p(m,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},594:function(e,t,n){"use strict";n.r(t),n.d(t,"Cart",(function(){return w}));var r=n(0),a=n.n(r),c=n(11),o=n.n(c),u=n(27),i=n(83),l=n(40),s=n(557),d=n(23),f=n.n(d),p=n(9),m=n(169),v=n(110),y=n(28),b=n(13),h=function(e){var t=e.course,n=e.removeCartItemHandler;return a.a.createElement("div",{class:"course-in-cart",key:t._id},a.a.createElement(b.b,{to:"/detail/".concat(t._id)},a.a.createElement("div",{class:"course-image"},a.a.createElement("img",{src:t.pic,alt:"",style:{width:130,height:73}}))),a.a.createElement("div",{class:"course-info"},a.a.createElement(b.b,{to:"/detail/".concat(t._id),class:"item"},t.title),a.a.createElement(b.b,{to:"/partner",class:"author-name"},t.university)),a.a.createElement("div",{class:"course-remove"},a.a.createElement("a",{onClick:function(){n(t._id)}},"B\u1ecf kh\u1ecfi gi\u1ecf h\xe0ng"),a.a.createElement(b.b,{to:"/detail/".concat(t._id)},"\u0110i \u0111\u1ebfn kh\xf3a h\u1ecdc")),a.a.createElement("div",{class:"course-price"},a.a.createElement("span",null,"".concat(t.price," vn\u0111")),a.a.createElement("i",{style:{marginLeft:7},class:"fas fa-tag"})))},E=Object(r.lazy)((function(){return n.e(11).then(n.bind(null,587))})),g=function(){var e=Object(l.c)((function(e){return e.userStatus.userInfo&&e.userStatus.userInfo._id})),t=Object(l.c)((function(e){return e.userStatus.userInfo&&e.userStatus.userInfo.cart})),n=Object(v.useFirestore)(),c=Object(r.useState)([]),d=Object(i.a)(c,2),b=d[0],g=d[1],w=Object(p.e)(),O=Object(l.b)();Object(r.useEffect)((function(){return j(),function(){}}),[t]);var j=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(y.a,"/api/user/cart"),{withCredentials:!0});case 2:t=e.sent,n=t.data,g(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){O(Object(m.f)(e));var t=b.filter((function(t){return t._id!==e}));g(t)},_=function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.post("".concat(y.a,"/api/user/buy"),{courses:b.map((function(e){return e._id}))});case 2:return w.push("/"),t.next=5,n.collection("noticfications").add({userId:e,title:"Mua h\xe0ng",description:"b\u1ea1n \u0111\xe3 mua ".concat(b.length," kho\xe1 h\u1ecdc. H\xe3y \u0111\u1ebfn h\u1ecdc ngay n\xe0o"),Date:n.FieldValue.serverTimestamp(),seen:!1});case 5:O(Object(m.b)());case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(null===b||void 0===b?void 0:b.length)>0?a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12"},a.a.createElement("h3",null,"C\xf3 ",b.length," kho\xe1 h\u1ecdc trong gi\u1ecf"))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-8"},a.a.createElement("div",{className:"left"},b.map((function(e){return a.a.createElement(h,{course:e,removeCartItemHandler:S})})))),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"right"},a.a.createElement("div",{className:"price-text"},a.a.createElement("div",{className:"total"},"T\u1ed5ng h\xf3a \u0111\u01a1n:"),a.a.createElement("div",{className:"price-large"},(null===b||void 0===b?void 0:b.length)?b.reduce((function(e,t){return e+t.price}),0):0," ","VND"),a.a.createElement("div",{className:"space"}),a.a.createElement(s.PayPalButton,{amount:(null===b||void 0===b?void 0:b.length)?b.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return e+t.price}),0):0,onSuccess:_})))))):a.a.createElement(E,null)},w=function(){var e=Object(l.c)((function(e){return e.userStatus.auth})),t=Object(p.e)();return Object(r.useEffect)((function(){return e||t.push("/"),function(){}}),[e,t]),a.a.createElement("div",{className:"content",style:{minHeight:800}},a.a.createElement("div",{className:"cart-header"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"header-bar"},a.a.createElement("div",null,a.a.createElement("ol",{className:"breadcrumb"},a.a.createElement("li",{className:"breadcrumb-item"},a.a.createElement(b.b,{to:"/"},a.a.createElement("i",{className:"fas fa-home"}))),a.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},"Gi\u1ecf h\xe0ng")),a.a.createElement("h1",null,"Th\u1ebb mua s\u1eafm"))))),a.a.createElement("div",{className:"space"},a.a.createElement("div",{className:"space-item"})),a.a.createElement(g,null))};t.default=w}}]);
//# sourceMappingURL=10.bf12ad48.chunk.js.map