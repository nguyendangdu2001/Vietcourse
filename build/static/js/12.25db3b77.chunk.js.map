{"version":3,"sources":["pageConponent/cart/CartItem.js","pageConponent/cart/CartMain.js","pageConponent/cart/index.js","common/components/Course/CourseInprogress.js","pageConponent/InProgress/index.js"],"names":["memo","props","course","removeCartItemHandler","t","useTranslation","useSuspense","className","key","_id","to","src","pic","alt","style","width","height","title","university","Intl","NumberFormat","currency","format","price","onClick","Trans","EmptyCart","lazy","CartMain","userId","useSelector","state","userStatus","userInfo","userCart","cart","firestore","useFirestore","useState","setCart","history","useHistory","dispatch","useDispatch","useEffect","a","Axios","get","nodeApiLink","withCredentials","data","getCartItem","useCallback","id","removeCartItem","paymentSuccessHandler","post","courses","map","push","collection","add","description","length","Date","FieldValue","serverTimestamp","seen","fetchUserData","inCartNum","boxShadow","TransitionGroup","appear","enter","exit","duration","collapse","bottom","reduce","sum","amount","onSuccess","Cart","auth","minHeight","aria-current","CourseInprogress","subject","Inprogress","userOwnCourses","ownCourses","setOwnCourses","getOwnCourses","backgroundColor","display","justifyContent","flexDirection","index"],"mappings":"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","file":"static/js/12.25db3b77.chunk.js","sourcesContent":["import React, { memo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useTranslation, Trans } from \"react-i18next\";\r\n\r\nexport const CartItem = (props) => {\r\n    const { course, removeCartItemHandler } = props;\r\n    const { t } = useTranslation(\"translation\",{useSuspense:false});\r\n    return (\r\n        <div className=\"course-in-cart\" key={course._id}>\r\n            <div className=\"course-image\">\r\n                <Link to={`/detail/${course._id}`}>\r\n                    <img src={course.pic} alt=\"\" style={{ width: 130, height: 73 }} />\r\n                </Link>\r\n            </div>\r\n            <div className=\"course-info\">\r\n                <Link to={`/detail/${course._id}`}>\r\n                    <div className=\"course-name\">{course.title}</div>\r\n                    <span className=\"author-name\">{course.university}</span>\r\n                </Link>\r\n                <div className=\"course-price\">\r\n                    <div>\r\n                        <span>{new Intl.NumberFormat('vi-VN',{style:'currency',currency:'VND'}).format(course.price)}</span>\r\n                    </div>\r\n                    <div className=\"price-tag\">\r\n                        <i className=\"fas fa-tag\"></i>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"cart-item-action\">\r\n                <span\r\n                    onClick={() => {\r\n                        removeCartItemHandler(course._id);\r\n                    }}\r\n                >\r\n                    <Trans t={t}>Bỏ khỏi giỏ hàng</Trans>\r\n                </span>\r\n                <Link to={`/detail/${course._id}`}><Trans t={t}>Đi đến khóa học</Trans></Link>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default memo(CartItem)","import React, { useEffect, useState, lazy, useCallback, memo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { PayPalButton } from \"react-paypal-button-v2\";\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { useFirestore } from \"react-redux-firebase/\";\r\nimport { nodeApiLink } from \"../../config/Api/NodeServerLink\";\r\nimport  CartItem  from \"./CartItem\";\r\nimport { TransitionGroup } from \"react-transition-group\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport { Trans, useTranslation } from \"react-i18next\";\r\nimport { removeCartItem, fetchUserData } from \"../../Redux/action/userAction\";\r\nconst EmptyCart = lazy(() => import(\"./EmptyCart\"));\r\n\r\nexport const CartMain = () => {\r\n    const userId = useSelector((state) => state.userStatus.userInfo && state.userStatus.userInfo._id);\r\n    const userCart = useSelector((state) => state.userStatus.userInfo && state.userStatus.userInfo.cart);\r\n    const firestore = useFirestore();\r\n    const [cart, setCart] = useState([]);\r\n    const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation(\"translation\",{useSuspense:false});\r\n    useEffect(() => {\r\n        const getCartItem = async () => {\r\n            const { data } = await Axios.get(`${nodeApiLink}/api/user/cart`, { withCredentials: true });\r\n            setCart(data);\r\n        };\r\n        getCartItem();\r\n        return () => {\r\n            //\r\n        };\r\n    }, [userCart]);\r\n    \r\n    const removeCartItemHandler = useCallback(\r\n        (id) => {\r\n            dispatch(removeCartItem(id));\r\n        },\r\n        [dispatch],\r\n    )\r\n    const paymentSuccessHandler = useCallback(\r\n        async () => {\r\n            await Axios.post(`${nodeApiLink}/api/user/buy`, {\r\n                courses: cart.map((course) => {\r\n                    return course._id;\r\n                }),\r\n            });\r\n            history.push(\"/\");\r\n            await firestore.collection(\"noticfications\").add({\r\n                userId,\r\n                title: \"Mua hàng\",\r\n                description: `bạn đã mua ${cart.length} khoá học. Hãy đến học ngay nào`,\r\n                Date: firestore.FieldValue.serverTimestamp(),\r\n                seen: false,\r\n            });\r\n            dispatch(fetchUserData());\r\n        },\r\n        [cart, dispatch, firestore, history, userId],\r\n    )\r\n    return cart?.length > 0 ? (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-12\">\r\n                    <h3><Trans t={t}>Có {{inCartNum:cart.length}} khoá học trong giỏ</Trans></h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col-12 col-md-9 my-2\">\r\n                    <div className=\"left\" style={{ boxShadow: \"0 0 2px #dedfe0\" }}>\r\n                        <TransitionGroup {...{ appear: true, enter: true, exit: true }}>\r\n                            {cart.map((course) => {\r\n                                return (\r\n                                    <Fade key={course._id} duration={700} collapse bottom>\r\n                                        <CartItem course={course} removeCartItemHandler={removeCartItemHandler} />\r\n                                    </Fade>\r\n                                );\r\n                            })}\r\n                        </TransitionGroup>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-12 col-md-3\">\r\n                    <div className=\"right\">\r\n                        <div className=\"price-text\">\r\n                            <div className=\"total\"><Trans t={t}>Tổng hóa đơn</Trans>:</div>\r\n                            <div className=\"price-large\">\r\n                                {cart?.length\r\n                                    ? new Intl.NumberFormat('vi-VN',{\r\n                                        style:'currency',\r\n                                        currency:'VND'\r\n                                    }).format( cart.reduce((sum = 0, course) => {\r\n                                          return sum + course.price;\r\n                                      }, 0))\r\n                                    : 0}\r\n                            </div>\r\n                            <div className=\"space\"></div>\r\n                            <PayPalButton\r\n                                amount={\r\n                                    cart?.length\r\n                                        ? cart.reduce((sum = 0, course) => {\r\n                                              return sum + course.price;\r\n                                          }, 0)\r\n                                        : 0\r\n                                }\r\n                                onSuccess={paymentSuccessHandler}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    ) : (\r\n        <EmptyCart />\r\n    );\r\n};\r\nexport default memo(CartMain)","import './style/not_empty.css'\r\nimport './style/empty.css'\r\nimport './style/cart-header.css'\r\nimport React, { useEffect, memo } from \"react\";\r\nimport { CartMain } from \"./CartMain\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useTranslation, Trans } from \"react-i18next\";\r\n\r\nexport const Cart = () => {\r\n    const auth = useSelector((state) => state.userStatus.auth);\r\n    const history = useHistory();\r\n    const { t } = useTranslation(\"translation\",{useSuspense:false});\r\n    useEffect(() => {\r\n        if (!auth) history.push(\"/\");\r\n        return () => {\r\n            //\r\n        };\r\n    }, [auth, history]);\r\n    return (\r\n        <div className=\"content\" style={{ minHeight: 800 }}>\r\n            <div className=\"cart-header\">\r\n                <div className=\"container\">\r\n                    <div className=\"header-bar\">\r\n                        <div>\r\n                            <ol className=\"breadcrumb\">\r\n                                <li className=\"breadcrumb-item\">\r\n                                    <Link to=\"/\">\r\n                                        <i className=\"fas fa-home\"></i>\r\n                                    </Link>\r\n                                </li>\r\n                                <li className=\"breadcrumb-item active\" aria-current=\"page\">\r\n                                <Trans t={t}>Giỏ hàng</Trans>\r\n                                </li>\r\n                            </ol>\r\n                            <h1><Trans t={t}>Thẻ mua sắm</Trans></h1>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"space\">\r\n                <div className=\"space-item\"></div>\r\n            </div>\r\n            <CartMain />\r\n        </div>\r\n    );\r\n};\r\nexport default memo(Cart);\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useTranslation, Trans } from 'react-i18next';\r\n\r\nexport const CourseInprogress = (props) => {\r\n    const {course} = props\r\n    const { t } = useTranslation(\"translation\",{useSuspense:false});\r\n    return (\r\n        <div className=\"InProgressCourses\">\r\n                <div className=\"center\">\r\n                    <div className=\"Inprogress\">\r\n                        <section>\r\n                            <header>\r\n                                <div className=\"CourseHeader\">\r\n                                    <div className=\"header-content\"><Trans t={t}>{course.subject}</Trans></div>\r\n                                </div>\r\n                            </header>\r\n                            <div className=\"course-main-content\">\r\n                                <div className=\"course-main-content-center row\">\r\n                                    <div className=\"course-main-content-primary col-md-6 col-12\">\r\n                                        <Link to={`detail/${course._id}`}>\r\n                                            <h1 className=\"course-main-content-title\">\r\n                                                {course.title}\r\n                                            </h1>\r\n                                        </Link>\r\n                                        <span className=\"course-pill\"><Trans t={t}>Chưa hoàn thành</Trans></span>\r\n                                    </div>\r\n                                    <div className=\"course-main-content-secondary col-md-6 col-12\">\r\n                                        <div className=\"course-main-content-button\">\r\n                                            <div className=\"Course-link-button\">\r\n                                                <Link to={`/classroom`} >\r\n                                                    <span><Trans t={t}>Đến khóa học</Trans></span>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <footer className=\"Course-footer\">\r\n                                <div className=\"partner-name\">\r\n                                    <div>{course.university}</div>\r\n                                </div>\r\n                            </footer>\r\n                        </section>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\n","import '../../style/Inpogress.css'\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\n\r\n\r\nimport { useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Fade from \"react-reveal/Fade\";\r\nimport { nodeApiLink } from '../../config/Api/NodeServerLink';\r\nimport { CourseInprogress } from '../../common/components/Course/CourseInprogress';\r\n\r\n\r\nexport const Inprogress = () => {\r\n    const userOwnCourses =\r\n        useSelector((state) => state.userStatus.userInfo && state.userStatus.userInfo.ownCourses) || [];\r\n    const auth = useSelector((state) => state.userStatus.auth);\r\n    const history = useHistory();\r\n    const [ownCourses, setOwnCourses] = useState([]);\r\n    useEffect(() => {\r\n        const getOwnCourses = async () => {\r\n            const { data } = await Axios.get(`${nodeApiLink}/api/user/owncourse`, { withCredentials: true });\r\n            setOwnCourses(data);\r\n        };\r\n        getOwnCourses();\r\n        return () => {\r\n            //\r\n        };\r\n    }, [userOwnCourses.length]);\r\n    useEffect(() => {\r\n        if (!auth) history.push(\"/\");\r\n        return () => {\r\n            //\r\n        };\r\n    }, [auth, history]);\r\n\r\n    return (\r\n        <div\r\n            className=\"container-fluid\"\r\n            style={{\r\n                minHeight: 700,\r\n                backgroundColor: \"#f3f3f3\",\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                flexDirection: \"column\",\r\n            }}\r\n        >\r\n            {ownCourses &&\r\n                ownCourses.map((course,index) => {\r\n                    return (\r\n                        <Fade key={course._id} bottom>\r\n                            <CourseInprogress  course={course} />\r\n                        </Fade>\r\n                    );\r\n                })}\r\n            {/* {ownCourses.length <0 \r\n                ? ownCourses.map((course) => {\r\n                      return <CourseInprogress key={course._id} course={course} />;\r\n                  })\r\n                : (<Skeleton variant='rect' width={956} height={357} style={{margin:'32px auto'}} />)} */}\r\n        </div>\r\n    );\r\n};\r\nexport default Inprogress;\r\n"],"sourceRoot":""}